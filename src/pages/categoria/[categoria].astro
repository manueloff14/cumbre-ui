---
const { categoria } = Astro.params;

// Hacer la solicitud a la API del servidor local para obtener los trabajos de la categoría
const response = await fetch(`https://jobs-server-production.up.railway.app/categoria/${categoria}`);
// const response = await fetch(`http://localhost:3000/categoria/${categoria}`);
const jobs = await response.json();
---

<h1>Trabajos para la categoría: {categoria}</h1>

<ul>
    {jobs.map((job) => (
        <li>
            <a href={`/empleo/${job.id}`}>
                <h2>{job.title}</h2>
                <p>{job.company}</p>
                <p>{job.location}</p>
            </a>
        </li>
    ))}
</ul>
